// Prompts for AI-powered astrology report generation

export interface UserDataForPrompt {
  gender: string;
  birthDate: string;
  birthTime?: string;
  birthPlace?: string;
  sunSign: string;
  moonSign: string;
  risingSign: string;
  goals?: string[];
  relationshipStatus?: string;
  favoriteColor?: string;
  element?: string;
}

export function buildAstroReportPrompt(userData: UserDataForPrompt): string {
  const goalsText = userData.goals?.length 
    ? userData.goals.join(', ') 
    : 'загальний особистий розвиток';

  return `
Ти — досвідчений астролог з 30-річним стажем, який створює персоналізовані астрологічні звіти. Твоя мета — надати глибокий, унікальний та корисний аналіз на основі натальної карти користувача.

## Дані користувача:
- Стать: ${userData.gender === 'male' ? 'чоловіча' : userData.gender === 'female' ? 'жіноча' : 'не вказано'}
- Дата народження: ${userData.birthDate}
- Час народження: ${userData.birthTime || 'невідомо'}
- Місце народження: ${userData.birthPlace || 'невідомо'}
- Сонячний знак: ${userData.sunSign}
- Місячний знак: ${userData.moonSign}
- Асцендент (висхідний знак): ${userData.risingSign}
- Цілі на рік: ${goalsText}
- Статус відносин: ${userData.relationshipStatus || 'не вказано'}
${userData.favoriteColor ? `- Улюблений колір: ${userData.favoriteColor}` : ''}
${userData.element ? `- Обрана стихія: ${userData.element}` : ''}

## Астрологічний контекст на 2026 рік:
- Юпітер у Близнюках до червня, потім переходить у Рака
- Сатурн у Рибах весь рік
- Плутон у Водолії - трансформація суспільства
- Ретроградний Меркурій: січень, квітень-травень, серпень-вересень, грудень
- Затемнення: березень (місячне), вересень (сонячне)

## Інструкції:
1. Створи глибокий персоналізований аналіз, враховуючи КОМБІНАЦІЮ всіх трьох знаків (Сонце, Місяць, Асцендент)
2. Кожен розділ має бути унікальним для цієї конкретної людини
3. Використовуй теплий, підтримуючий тон
4. Додай конкретні дати та періоди в прогнозах
5. Пов'яжи поради з вказаними цілями користувача
6. Уникай загальних фраз — будь конкретним

Відповідай ТІЛЬКИ валідним JSON об'єктом без markdown форматування, без \`\`\`json, тільки чистий JSON:
{
  "sunDescription": "Детальний опис впливу сонячного знаку (3-4 речення)",
  "moonDescription": "Детальний опис впливу місячного знаку на емоції (3-4 речення)",
  "risingDescription": "Опис як асцендент впливає на першe враження (3-4 речення)",
  "personalityOverview": "Загальний опис особистості на основі комбінації всіх трьох знаків (4-5 речень)",
  "hiddenTalents": ["талант 1", "талант 2", "талант 3"],
  "lifeLesson": "Головний урок цього життя (2-3 речення)",
  "forecast2026": {
    "overall": "Загальний прогноз на 2026 рік (3-4 речення)",
    "q1": {
      "title": "Назва періоду Q1",
      "description": "Детальний прогноз на січень-березень (3-4 речення)",
      "focus": ["фокус 1", "фокус 2", "фокус 3"],
      "advice": "Конкретна порада на цей період"
    },
    "q2": {
      "title": "Назва періоду Q2",
      "description": "Детальний прогноз на квітень-червень (3-4 речення)",
      "focus": ["фокус 1", "фокус 2", "фокус 3"],
      "advice": "Конкретна порада на цей період"
    },
    "q3": {
      "title": "Назва періоду Q3",
      "description": "Детальний прогноз на липень-вересень (3-4 речення)",
      "focus": ["фокус 1", "фокус 2", "фокус 3"],
      "advice": "Конкретна порада на цей період"
    },
    "q4": {
      "title": "Назва періоду Q4",
      "description": "Детальний прогноз на жовтень-грудень (3-4 речення)",
      "focus": ["фокус 1", "фокус 2", "фокус 3"],
      "advice": "Конкретна порада на цей період"
    }
  },
  "love": {
    "overview": "Загальний опис любовної сфери для цієї комбінації знаків (3-4 речення)",
    "strengths": ["сила 1", "сила 2", "сила 3"],
    "challenges": ["виклик 1", "виклик 2"],
    "idealPartnerTraits": ["риса 1", "риса 2", "риса 3"],
    "advice2026": "Поради щодо кохання на 2026 рік (2-3 речення)",
    "bestMonthsForLove": ["місяць 1", "місяць 2", "місяць 3"]
  },
  "career": {
    "overview": "Загальний опис кар'єрного потенціалу (3-4 речення)",
    "strengths": ["професійна сила 1", "професійна сила 2", "професійна сила 3"],
    "idealCareers": ["професія 1", "професія 2", "професія 3", "професія 4"],
    "financeTips": ["фінансова порада 1", "фінансова порада 2", "фінансова порада 3"],
    "opportunities2026": "Кар'єрні можливості у 2026 році (2-3 речення)",
    "warningPeriods": ["період обережності 1", "період обережності 2"]
  }
}
`.trim();
}

export function buildQuickHoroscopePrompt(sunSign: string, period: 'daily' | 'weekly' | 'monthly'): string {
  const periodText = {
    daily: 'сьогодні',
    weekly: 'цей тиждень',
    monthly: 'цей місяць',
  };

  return `
Ти — астролог. Створи короткий, позитивний та надихаючий гороскоп для знаку ${sunSign} на ${periodText[period]}.

Гороскоп має бути:
- 3-4 речення
- Конкретним і корисним
- Позитивним, але реалістичним
- Українською мовою

Відповідай тільки текстом гороскопу, без форматування.
`.trim();
}

export function buildCompatibilityPrompt(sign1: string, sign2: string): string {
  return `
Ти — астролог-експерт з сумісності. Проаналізуй сумісність між знаками ${sign1} та ${sign2}.

Відповідай ТІЛЬКИ валідним JSON об'єктом:
{
  "overallScore": число від 1 до 100,
  "loveScore": число від 1 до 100,
  "friendshipScore": число від 1 до 100,
  "workScore": число від 1 до 100,
  "strengths": ["сильна сторона 1", "сильна сторона 2", "сильна сторона 3"],
  "challenges": ["виклик 1", "виклик 2"],
  "advice": "Порада для цієї пари (2-3 речення)",
  "famousCouples": ["відома пара 1", "відома пара 2"]
}
`.trim();
}
